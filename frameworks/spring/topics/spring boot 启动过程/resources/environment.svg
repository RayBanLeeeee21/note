<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="850px" preserveAspectRatio="none" style="width:1102px;height:850px;" version="1.1" viewBox="0 0 1102 850" width="1102px" zoomAndPan="magnify"><defs><filter height="300%" id="f12wb8l94lhpyf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class PropertyResolver--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="228.2754" id="PropertyResolver" style="stroke: #A80036; stroke-width: 1.5;" width="419" x="385.5" y="8"/><ellipse cx="543.25" cy="24" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M539.8438,18.2813 L539.8438,17.875 L546.1563,17.875 L546.1563,18.2813 L543.625,18.2813 Q543.625,18.2813 543.7734,18.4141 Q543.9219,18.5469 543.9219,18.8125 L543.9219,28.2969 Q543.9219,28.5625 544.1406,28.6953 Q544.3594,28.8281 544.3594,28.8281 L546.1563,28.8281 L546.1563,29.2344 L539.8438,29.2344 L539.8438,28.8281 L541.375,28.8281 Q541.7031,28.8281 541.8359,28.6953 Q541.9688,28.5625 541.9688,28.2969 L541.9688,18.8125 Q541.9688,18.5469 541.8359,18.4141 Q541.7031,18.2813 541.375,18.2813 L539.8438,18.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="563.75" y="29.5576">PropertyResolver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="386.5" x2="803.5" y1="40" y2="40"/><ellipse cx="396.5" cy="70.0229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="405.5" y="75.6289">boolean containsProperty(String key);</text><ellipse cx="396.5" cy="85.0459" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="405.5" y="90.6519">String getProperty(String key);</text><ellipse cx="396.5" cy="100.0688" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="405.5" y="105.6748">String getProperty(String key, String defaultValue);</text><ellipse cx="396.5" cy="115.0918" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="405.5" y="120.6978">&lt;T&gt; T getProperty(String key, Class&lt;T&gt; targetType);</text><ellipse cx="396.5" cy="130.1147" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="327" x="405.5" y="135.7207">&lt;T&gt; T getProperty(String key, Class&lt;T&gt; targetType, T defaultValue);</text><ellipse cx="396.5" cy="145.1377" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="328" x="405.5" y="150.7437">String getRequiredProperty(String key) throws IllegalStateException;</text><ellipse cx="396.5" cy="160.1606" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="291" x="405.5" y="165.7666">&lt;T&gt; T getRequiredProperty(String key, Class&lt;T&gt; targetType)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="432.5" y="180.7896">throws IllegalStateException;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="386.5" x2="563.5" y1="55.5115" y2="55.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="563.5" y="60.106">property访问</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="626.5" x2="803.5" y1="55.5115" y2="55.5115"/><ellipse cx="396.5" cy="209.2295" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="405.5" y="214.8354">String resolvePlaceholders(String text);</text><ellipse cx="396.5" cy="224.2524" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="393" x="405.5" y="229.8584">String resolveRequiredPlaceholders(String text) throws IllegalArgumentException;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="386.5" x2="555.5" y1="194.718" y2="194.718"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="555.5" y="199.3125">解析placeHolder</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="634.5" x2="803.5" y1="194.718" y2="194.718"/><!--class Environment--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="138.1377" id="Environment" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="208.5" y="341"/><ellipse cx="283.75" cy="357" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M280.3438,351.2813 L280.3438,350.875 L286.6563,350.875 L286.6563,351.2813 L284.125,351.2813 Q284.125,351.2813 284.2734,351.4141 Q284.4219,351.5469 284.4219,351.8125 L284.4219,361.2969 Q284.4219,361.5625 284.6406,361.6953 Q284.8594,361.8281 284.8594,361.8281 L286.6563,361.8281 L286.6563,362.2344 L280.3438,362.2344 L280.3438,361.8281 L281.875,361.8281 Q282.2031,361.8281 282.3359,361.6953 Q282.4688,361.5625 282.4688,361.2969 L282.4688,351.8125 Q282.4688,351.5469 282.3359,351.4141 Q282.2031,351.2813 281.875,351.2813 L280.3438,351.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="304.25" y="362.5576">Environment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="436.5" y1="373" y2="373"/><ellipse cx="219.5" cy="403.0229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="228.5" y="408.6289">String[] getActiveProfiles();</text><ellipse cx="219.5" cy="418.0459" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="228.5" y="423.6519">String[] getDefaultProfiles();</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="209.5" x2="297" y1="388.5115" y2="388.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="297" y="393.106">访问profile</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="349" x2="436.5" y1="388.5115" y2="388.5115"/><ellipse cx="219.5" cy="452.0918" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="228.5" y="457.6978">boolean acceptsProfiles(String... profiles);</text><ellipse cx="219.5" cy="467.1147" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="228.5" y="472.7207">boolean acceptsProfiles(Profiles profiles);</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="209.5" x2="253" y1="437.5803" y2="437.5803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="253" y="442.1748">运行时判断profile是否起作用</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="393" x2="436.5" y1="437.5803" y2="437.5803"/><!--class ConfigurablePropertyResolver--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="228.2754" id="ConfigurablePropertyResolver" style="stroke: #A80036; stroke-width: 1.5;" width="448" x="643" y="296"/><ellipse cx="779.25" cy="312" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M775.8438,306.2813 L775.8438,305.875 L782.1563,305.875 L782.1563,306.2813 L779.625,306.2813 Q779.625,306.2813 779.7734,306.4141 Q779.9219,306.5469 779.9219,306.8125 L779.9219,316.2969 Q779.9219,316.5625 780.1406,316.6953 Q780.3594,316.8281 780.3594,316.8281 L782.1563,316.8281 L782.1563,317.2344 L775.8438,317.2344 L775.8438,316.8281 L777.375,316.8281 Q777.7031,316.8281 777.8359,316.6953 Q777.9688,316.5625 777.9688,316.2969 L777.9688,306.8125 Q777.9688,306.5469 777.8359,306.4141 Q777.7031,306.2813 777.375,306.2813 L775.8438,306.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="167" x="799.75" y="317.5576">ConfigurablePropertyResolver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="644" x2="1090" y1="328" y2="328"/><ellipse cx="654" cy="358.0229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="388" x="663" y="363.6289">void setConversionService(ConfigurableConversionService conversionService);</text><ellipse cx="654" cy="373.0459" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="663" y="378.6519">void setPlaceholderPrefix(String placeholderPrefix);</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="927" y="378.6519">// 前缀, 如"${aaa:1}"中的"${"</text><ellipse cx="654" cy="388.0688" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="663" y="393.6748">void setPlaceholderSuffix(String placeholderSuffix);</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="927" y="393.6748">// 后缀, 如"${aaa:1}"中的"}"</text><ellipse cx="654" cy="403.0918" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="422" x="663" y="408.6978">void setValueSeparator(@Nullable String valueSeparator);// 分隔符, 如"${aaa:1}"中的":"</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="663" y="423.7207">//解析出错后的处理(原封不动返回还是抛异常)</text><ellipse cx="654" cy="433.1377" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231" x="663" y="438.7437">void setIgnoreUnresolvableNestedPlaceholders(</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="690" y="453.7666">boolean ignoreUnresolvableNestedPlaceholders</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="7" x="663" y="468.7896">);</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="644" x2="805" y1="343.5115" y2="343.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="805" y="348.106">可配置(Configurable)方法</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="929" x2="1090" y1="343.5115" y2="343.5115"/><ellipse cx="654" cy="497.2295" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="270" x="663" y="502.8354">void setRequiredProperties(String... requiredProperties);</text><ellipse cx="654" cy="512.2524" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="379" x="663" y="517.8584">void validateRequiredProperties() throws MissingRequiredPropertiesException;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="644" x2="802.5" y1="482.718" y2="482.718"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="802.5" y="487.3125">设置和验证必需的property</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="931.5" x2="1090" y1="482.718" y2="482.718"/><!--class ConfigurableEnvironment--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="255.2983" id="ConfigurableEnvironment" style="stroke: #A80036; stroke-width: 1.5;" width="285" x="207.5" y="584"/><ellipse cx="274.75" cy="600" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M271.3438,594.2813 L271.3438,593.875 L277.6563,593.875 L277.6563,594.2813 L275.125,594.2813 Q275.125,594.2813 275.2734,594.4141 Q275.4219,594.5469 275.4219,594.8125 L275.4219,604.2969 Q275.4219,604.5625 275.6406,604.6953 Q275.8594,604.8281 275.8594,604.8281 L277.6563,604.8281 L277.6563,605.2344 L271.3438,605.2344 L271.3438,604.8281 L272.875,604.8281 Q273.2031,604.8281 273.3359,604.6953 Q273.4688,604.5625 273.4688,604.2969 L273.4688,594.8125 Q273.4688,594.5469 273.3359,594.4141 Q273.2031,594.2813 272.875,594.2813 L271.3438,594.2813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="142" x="295.25" y="605.5576">ConfigurableEnvironment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="208.5" x2="491.5" y1="616" y2="616"/><ellipse cx="218.5" cy="646.0229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="227.5" y="651.6289">void setActiveProfiles(String... profiles);</text><ellipse cx="218.5" cy="661.0459" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="227.5" y="666.6519">void addActiveProfile(String profile);</text><ellipse cx="218.5" cy="676.0688" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="227.5" y="681.6748">void setDefaultProfiles(String... profiles);</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="208.5" x2="288" y1="631.5115" y2="631.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="288" y="636.106">可配置(Configurable)方法</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="412" x2="491.5" y1="631.5115" y2="631.5115"/><ellipse cx="218.5" cy="710.1147" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="227.5" y="715.7207">MutablePropertySources getPropertySources();</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="208.5" x2="322.5" y1="695.6033" y2="695.6033"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="322.5" y="700.1978">访问配置源</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="377.5" x2="491.5" y1="695.6033" y2="695.6033"/><ellipse cx="218.5" cy="744.1606" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="227.5" y="749.7666">Map&lt;String, Object&gt; getSystemProperties();</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="208.5" x2="308" y1="729.6492" y2="729.6492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="308" y="734.2437">JVM参数property</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="392" x2="491.5" y1="729.6492" y2="729.6492"/><ellipse cx="218.5" cy="778.2065" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="227.5" y="783.8125">Map&lt;String, Object&gt; getSystemEnvironment();</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="208.5" x2="307.5" y1="763.6951" y2="763.6951"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="307.5" y="768.2896">环境变量property</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="392.5" x2="491.5" y1="763.6951" y2="763.6951"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="259" x="227.5" y="817.8584">// 继承并覆盖父的active profile, default profile, 配置源</text><ellipse cx="218.5" cy="827.2754" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="227.5" y="832.8813">void merge(ConfigurableEnvironment parent);</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="208.5" x2="298.5" y1="797.741" y2="797.741"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="298.5" y="802.3354">与父Environment合并</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="401.5" x2="491.5" y1="797.741" y2="797.741"/><!--class ConversionService--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="62.5344" id="ConversionService" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="472.5" y="378.5"/><ellipse cx="487.5" cy="394.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M486.0781,399.8594 Q484.2188,399.8594 483.125,398.4688 Q482.0313,397.0781 482.0313,394.0938 Q482.0313,391.5625 483.1953,389.9063 Q484.3594,388.25 486.3438,388.25 Q487.8125,388.25 488.2813,388.375 Q488.75,388.5781 488.75,388.5781 Q488.75,388.5781 488.75,388.5078 Q488.75,388.4375 489.3594,387.5156 L490.4063,391.1719 L489.0781,391.5781 Q488.6094,390.0313 487.9453,389.3672 Q487.2813,388.7031 486.2188,388.7031 Q485.8281,388.7031 485.0625,390.2344 Q484.2969,391.7656 484.2969,394.0156 Q484.2969,396.4844 484.9609,397.875 Q485.625,399.2656 486.1563,399.2656 Q487.2188,399.2656 487.9766,398.5 Q488.7344,397.7344 489.0781,396.0781 L490.4063,396.6719 Q490.0781,398.0781 489.1797,398.9688 Q488.2813,399.8594 486.0781,399.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="501.5" y="400.0576">ConversionService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="473.5" x2="606.5" y1="410.5" y2="410.5"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="473.5" x2="485" y1="426.0115" y2="426.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="485" y="430.606">字符串格式转换等方法</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="595" x2="606.5" y1="426.0115" y2="426.0115"/><!--class MutablePropertySources--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="48" id="MutablePropertySources" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="6" y="687.5"/><ellipse cx="21" cy="703.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M19.5781,708.8594 Q17.7188,708.8594 16.625,707.4688 Q15.5313,706.0781 15.5313,703.0938 Q15.5313,700.5625 16.6953,698.9063 Q17.8594,697.25 19.8438,697.25 Q21.3125,697.25 21.7813,697.375 Q22.25,697.5781 22.25,697.5781 Q22.25,697.5781 22.25,697.5078 Q22.25,697.4375 22.8594,696.5156 L23.9063,700.1719 L22.5781,700.5781 Q22.1094,699.0313 21.4453,698.3672 Q20.7813,697.7031 19.7188,697.7031 Q19.3281,697.7031 18.5625,699.2344 Q17.7969,700.7656 17.7969,703.0156 Q17.7969,705.4844 18.4609,706.875 Q19.125,708.2656 19.6563,708.2656 Q20.7188,708.2656 21.4766,707.5 Q22.2344,706.7344 22.5781,705.0781 L23.9063,705.6719 Q23.5781,707.0781 22.6797,707.9688 Q21.7813,708.8594 19.5781,708.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="35" y="709.0576">MutablePropertySources</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="171" y1="719.5" y2="719.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="171" y1="727.5" y2="727.5"/><!--class AbstractEnvironment--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="48" id="AbstractEnvironment" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="527.5" y="687.5"/><ellipse cx="542.5" cy="703.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M542.875,703.4844 L540.8906,703.4844 L540.2969,706 Q540.2344,706.3438 540.2344,706.5313 Q540.2344,706.7969 540.3281,707.0625 Q540.4219,707.3281 540.4219,707.3281 L541.0938,707.3281 L541.0938,707.7344 L537.6406,707.7344 L537.6406,707.3281 L537.8281,707.3281 Q538.0938,707.3281 538.2969,707.1641 Q538.5,707 538.5625,706.6094 L541.1563,696.4375 L543.0313,695.8281 L545.6719,706.6094 Q545.8125,707 546.0078,707.1641 Q546.2031,707.3281 546.2031,707.3281 L546.6719,707.3281 L546.6719,707.7344 L542.8125,707.7344 L542.8125,707.3281 L543.0781,707.3281 Q543.4844,707.3281 543.5469,707.1641 Q543.6094,707 543.6094,706.875 Q543.6094,706.6094 543.5469,706.4063 L542.875,703.4844 Z M541.4844,697.5781 L541.4844,697.5781 L541.0313,703.0781 L542.8125,703.0781 L541.4844,697.5781 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="556.5" y="709.0576">AbstractEnvironment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="528.5" x2="673.5" y1="719.5" y2="719.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="528.5" x2="673.5" y1="727.5" y2="727.5"/><!--class StandardEnvironment--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="48" id="StandardEnvironment" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="709.5" y="687.5"/><ellipse cx="724.5" cy="703.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M723.0781,708.8594 Q721.2188,708.8594 720.125,707.4688 Q719.0313,706.0781 719.0313,703.0938 Q719.0313,700.5625 720.1953,698.9063 Q721.3594,697.25 723.3438,697.25 Q724.8125,697.25 725.2813,697.375 Q725.75,697.5781 725.75,697.5781 Q725.75,697.5781 725.75,697.5078 Q725.75,697.4375 726.3594,696.5156 L727.4063,700.1719 L726.0781,700.5781 Q725.6094,699.0313 724.9453,698.3672 Q724.2813,697.7031 723.2188,697.7031 Q722.8281,697.7031 722.0625,699.2344 Q721.2969,700.7656 721.2969,703.0156 Q721.2969,705.4844 721.9609,706.875 Q722.625,708.2656 723.1563,708.2656 Q724.2188,708.2656 724.9766,707.5 Q725.7344,706.7344 726.0781,705.0781 L727.4063,705.6719 Q727.0781,707.0781 726.1797,707.9688 Q725.2813,708.8594 723.0781,708.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="738.5" y="709.0576">StandardEnvironment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="710.5" x2="859.5" y1="719.5" y2="719.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="710.5" x2="859.5" y1="727.5" y2="727.5"/><!--class PropertySource--><rect fill="#FEFECE" filter="url(#f12wb8l94lhpyf)" height="48" id="PropertySource" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="31" y="386"/><ellipse cx="46" cy="402" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M44.5781,407.3594 Q42.7188,407.3594 41.625,405.9688 Q40.5313,404.5781 40.5313,401.5938 Q40.5313,399.0625 41.6953,397.4063 Q42.8594,395.75 44.8438,395.75 Q46.3125,395.75 46.7813,395.875 Q47.25,396.0781 47.25,396.0781 Q47.25,396.0781 47.25,396.0078 Q47.25,395.9375 47.8594,395.0156 L48.9063,398.6719 L47.5781,399.0781 Q47.1094,397.5313 46.4453,396.8672 Q45.7813,396.2031 44.7188,396.2031 Q44.3281,396.2031 43.5625,397.7344 Q42.7969,399.2656 42.7969,401.5156 Q42.7969,403.9844 43.4609,405.375 Q44.125,406.7656 44.6563,406.7656 Q45.7188,406.7656 46.4766,406 Q47.2344,405.2344 47.5781,403.5781 L48.9063,404.1719 Q48.5781,405.5781 47.6797,406.4688 Q46.7813,407.3594 44.5781,407.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="60" y="407.5576">PropertySource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="32" x2="146" y1="418" y2="418"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="32" x2="146" y1="426" y2="426"/><!--reverse link PropertyResolver to Environment--><path d="M473.558,250.693 C444.023,281.748 413.562,313.777 387.832,340.831 " fill="none" id="PropertyResolver&lt;-Environment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="468.643,245.703,487.498,236.035,478.788,255.351,468.643,245.703" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link PropertyResolver to ConfigurablePropertyResolver--><path d="M716.652,250.914 C730.897,265.891 745.354,281.092 759.389,295.85 " fill="none" id="PropertyResolver&lt;-ConfigurablePropertyResolver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="711.212,255.351,702.502,236.035,721.357,245.703,711.212,255.351" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link Environment to ConfigurableEnvironment--><path d="M330.966,499.368 C333.354,525.847 336.02,555.423 338.583,583.86 " fill="none" id="Environment&lt;-ConfigurableEnvironment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="323.985,499.884,329.161,479.336,337.928,498.627,323.985,499.884" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link ConfigurablePropertyResolver to ConfigurableEnvironment--><path d="M624.52,526.141 C569.247,552.885 522.866,575.931 510,584 C504.3,587.575 498.565,591.315 492.831,595.178 " fill="none" id="ConfigurablePropertyResolver&lt;-ConfigurableEnvironment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="621.693,519.733,642.747,517.342,627.779,532.34,621.693,519.733" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ConversionService to ConfigurablePropertyResolver--><path d="M607.699,410 C615.032,410 622.365,410 629.698,410 " fill="none" id="ConversionService-&gt;ConfigurablePropertyResolver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="642.897,410,636.897,406,630.897,410,636.897,414,642.897,410" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MutablePropertySources to ConfigurableEnvironment--><path d="M172.092,711.5 C179.403,711.5 186.715,711.5 194.026,711.5 " fill="none" id="MutablePropertySources-&gt;ConfigurableEnvironment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="207.187,711.5,201.187,707.5,195.187,711.5,201.187,715.5,207.187,711.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="180.0747" y="708.6491">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="192.6427" y="708.9714">1</text><!--reverse link ConfigurableEnvironment to AbstractEnvironment--><path d="M512.721,711.5 C517.601,711.5 522.481,711.5 527.361,711.5 " fill="none" id="ConfigurableEnvironment&lt;-AbstractEnvironment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="512.658,718.5,492.658,711.5,512.658,704.5,512.658,718.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link AbstractEnvironment to StandardEnvironment--><path d="M694.874,711.5 C699.632,711.5 704.391,711.5 709.149,711.5 " fill="none" id="AbstractEnvironment&lt;-StandardEnvironment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="694.672,718.5,674.672,711.5,694.672,704.5,694.672,718.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PropertySource to MutablePropertySources--><path d="M89,434.004 C89,485.724 89,611.538 89,674.031 " fill="none" id="PropertySource-&gt;MutablePropertySources" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="89,687.418,93,681.418,89,675.418,85,681.418,89,687.418" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="62.075" y="456.9167">0..N</text><!--
@startuml environment
interface PropertyResolver {
..property访问..
	+ boolean containsProperty(String key);
	+ String getProperty(String key);
	+ String getProperty(String key, String defaultValue);
	+ <T> T getProperty(String key, Class<T> targetType);
	+ <T> T getProperty(String key, Class<T> targetType, T defaultValue);
	+ String getRequiredProperty(String key) throws IllegalStateException;
	+ <T> T getRequiredProperty(String key, Class<T> targetType) 
		\t throws IllegalStateException;
..解析placeHolder..
	+ String resolvePlaceholders(String text);
	+ String resolveRequiredPlaceholders(String text) throws IllegalArgumentException;
}
interface Environment extends PropertyResolver{
..访问profile..
	+ String[] getActiveProfiles();
	+ String[] getDefaultProfiles();
..运行时判断profile是否起作用..
	+ boolean acceptsProfiles(String... profiles);
	+ boolean acceptsProfiles(Profiles profiles);
}
interface ConfigurablePropertyResolver extends PropertyResolver {
..可配置(Configurable)方法..
	+ void setConversionService(ConfigurableConversionService conversionService);
	+ void setPlaceholderPrefix(String placeholderPrefix);	// 前缀, 如"${aaa:1}"中的"${"
	+ void setPlaceholderSuffix(String placeholderSuffix);	// 后缀, 如"${aaa:1}"中的"}"
	+ void setValueSeparator(@Nullable String valueSeparator);// 分隔符, 如"${aaa:1}"中的":"
	//解析出错后的处理(原封不动返回还是抛异常)
	+ void setIgnoreUnresolvableNestedPlaceholders(
		\t boolean ignoreUnresolvableNestedPlaceholders
	);
..设置和验证必需的property..
	+ void setRequiredProperties(String... requiredProperties);
	+ void validateRequiredProperties() throws MissingRequiredPropertiesException;
} 
interface ConfigurableEnvironment extends Environment, ConfigurablePropertyResolver {
..可配置(Configurable)方法..
	+ void setActiveProfiles(String... profiles);
	+ void addActiveProfile(String profile);
	+ void setDefaultProfiles(String... profiles);
..访问配置源..
	+ MutablePropertySources getPropertySources();
..JVM参数property..
	+ Map<String, Object> getSystemProperties();
..环境变量property..
	+ Map<String, Object> getSystemEnvironment();
..与父Environment合并..
// 继承并覆盖父的active profile, default profile, 配置源
	+ void merge(ConfigurableEnvironment parent);
}

class ConversionService{
..字符串格式转换等方法..
}
class MutablePropertySources
abstract class AbstractEnvironment
class StandardEnvironment
class PropertySource

ConfigurablePropertyResolver o-left- ConversionService
ConfigurableEnvironment "1" *-left- "1" MutablePropertySources
ConfigurableEnvironment <|-right- AbstractEnvironment
AbstractEnvironment <|-right- StandardEnvironment
MutablePropertySources o-up-"0..N" PropertySource
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_241-b07
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>