
UUID
- 优点:
    - 不经过网络
    - 全球唯一
- 缺点:
    - 无法体现业务含义
    - 非自增(作为主键时性能不好)
    - 长度过长(16 byte)

数据库自增ID:
- 优点:
    - 简单
- 缺点:
    - 瓶颈
    - 单点故障

**数据库多实例主键自增**: 通过设置自增起点为机器id, 自增步长为机器总数, 防止冲突
- 缺点:
    - 扩容时需要停机操作

**号段模式**: 节点访问数据库拿ID时, 一次拿一批, 这一批内的ID其它节点都不能用
- 通过乐观锁实现
- 缺点
    - 不够随机, 顺序递增可能带来安全问题
- 双buffer优化: 用两个buffer存不同号段, 其中一个快用完时, 去填充另一个buffer


redis实现(INCR)
- 优点:
    - 高性能
- 缺点:
    - RDB模式下, 宕机可能出现重复
    - AOF模式下, 恢复时间很长


**雪花模式(SnowFlake)**
- 共64位:
    - 正数位: 1 bit
    - 时间戳: 41 bit (以ms为最小单位, 从起始点开始可以用69年)
    - 机器号: 10 bit (1024台机器)
    - 自增部分: 12 bit (1 ms 可生成4096个ID)
- 缺点:
    - 依赖于时钟, 如果时钟重置则可能重复