# Chapter 05 索引和算法

MySQL索引类型:
- B+树索引: 
    - 聚集索引(主键索引): 
        - 结点key为主键值, Value为**页号**
        - 找到页以后, 再通过二分法从Record Directory找到slot, 再通过next指针向下找到记录
    - 辅助索引: **被索引对象为主键**
        - 非叶结点Key为索引列值, Pointer为页号, 表示下一个要找的页 
        - 叶子结点保存了Key为索引列值, Pointer为主键值
        - 找到主键后, 还要再用主键和主键索引, 再做查找
- 自适应哈希索引
- 全文索引


### 5.4.3 B+树索引的分裂


先验知识: 插入新记录时, 总是从空闲区(Free Space)从左往右分配, 或者是找之前已删除记录的空隙, 而不是每次从中插入时都把插入记录后的往后移, 这样的代价很高.
> InnoDB does not want to insert new rows according to the B-tree's key order (that would involve expensive shifting of large amounts of data), so it inserts new rows right after the end of the existing rows (at the top of the Free Space part) or wherever there's space left by a deleted row.

达到填充因子时, **不是直接从中分裂**, 而是找个靠近边缘的点作为分裂点, 减少移动记录的位置的代价
- 相关参数:
    - PAGE_DIRECTION: 上一次增长的方向