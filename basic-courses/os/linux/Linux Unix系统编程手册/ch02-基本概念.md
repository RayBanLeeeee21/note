# Chapter 02 基本概念

## 2.1 操作系统的核心-内核

操作系统:
- 内核: 管理计算资源的核心软件
- 附带的标准软件工具
    - *bash, 图形界面等*


内核职责:
- 进程调度
    - Linux是抢占式多任务操作系统
- 内存管理
    - 虚拟内存管理机制
        - **隔离**进程与进程, 进程与内核
        - 将程序的部分加载到内存, 而无需全部
- 文件系统
- 创建与终止进程
- 设备管理
- 联网
- 其它系统调用API
- 多用户


内核态与用户态:
- 用户态无法访问内核态内存空间
- 内核态可以访问用户态内存空间

## 2.2 用户和组

用户和组
- 查看用户: `cat /etc/passwd`
- 查看组: `cat /etc/group`
- **root用户的ID为0**


## 2.4 单根目录层级, 目录, 链接及文件

Linux中一切皆文件
- 普通文件
    - 纯文本文件
    - 二进制文件
- 目录
- 软链接
- 特殊文件(fd标识)
    - 设备
    - pipe
    - socket
  

目录:
- 以**表格**的形式记录其它文件/目录的**文件名**和**引用**
    - 文件可以有多个文件名或引用
    - 特殊引用
        - `.`: 自身引用
        - `..`: 父级目录引用


文件名
- SUSv3规定的**可移植文件名字符集**: `[-._a-zA-Z0-9]`

路径名
- 绝对路径名: 如`/home/username/`
- 相对路径名: 如`./bin`
- 获取当前路径: `pwd`

## 2.5 文件IO模型

IO操作模型:
- API:
    - `open()`
    - `read()`
    - `write()`
    - `close()`
    - `lseek()`
    - ...
- 特点: 面向字节流
    - 特殊:
        - 换行: `\n`
        - 文件结束符`EOF`: -1

文件描述符-fd:
- **非负整数**
- 进程继承的特殊fd:
    - `STDIN_FILENO=0`: 标准输入流, 只读
    - `STDOUT_FILENO=1`: 标准输出流, 只写
    - `STDERR_FILENO=2`: 标准错误流, 只写


`stdio.h`: C语言标准库, 基于系统调用(如`unistd.h`)提供的`open|read|write|close`实现
- API:
    - `fopen()`
    - `fclose()`
    - `scanf()`
    - `printf()`
    - `fgets()`
    - ...

## 2.6 程序

过滤器: 从STDIN读数据, 处理后输出到STDOUT的一类程序
- grep, cat, awk, wc...

进程: 计算机资源分配的基本单位
- 由内核负责管理进程的资源


进程的内存布局:
- 文本: 程序的指令
- 数据: 静态变量, 全局变量...
- 栈: 以栈帧为单位保存函数作用域中的数据. 动态增减
    - 函数实参, 局部变量
    - 函数调用链接等
- 堆: 可动态分配的内存(malloc)


